(function(a){a(function(){var b={};b.target="singular-entries.behind.php";b.addRecord=function(d,c){a("#errors").children().remove();a.ajax({type:"POST",url:b.target,data:{actionType:"add",table:d,value:c},success:function(e){a("select."+d).prepend(e)},error:b.displayErrors})};b.deleteRecord=function(d,c){a("#errors").children().remove();a.ajax({type:"POST",url:b.target,data:{actionType:"delete",table:d,value:c},success:function(){a("select."+d).find("option:selected").remove();a(":text."+d).val("");a(":button[name="+d+"-edit]").add(":button[name="+d+"-delete]").attr("disabled",true)},error:b.displayErrors})};b.editRecord=function(e,c,d){a("#errors").children().remove();a.ajax({type:"POST",url:b.target,data:{actionType:"edit",table:e,oldValue:c,newValue:d},success:function(f){a("select."+e).find("option:selected").val(f).text(f);a(":text."+e).val("")},error:b.displayErrors})};b.displayErrors=function(c){a("#errors").append("<p>"+c.responseText+"</p>")};b.validate=function(d){a("#errors").children().remove();if(a.trim(d)==""){a("#errors").append("<p>Value cannot be empty</p>");return false}var c=false;a("option").each(function(){if(a(this).val()==d){a("#errors").append("<p>Value already exists</p>");c=true}});if(c){return false}return true};a("select").change(function(){a("#errors").children().remove();var d=a(this).val();var c=a(this).attr("name");a(":text."+c).val(d);a(":button[name="+c+"-edit]").attr("disabled",false);a(":button[name="+c+"-delete]").attr("disabled",false)});a(":button[name$=add]").click(function(){var c=a(this).attr("name").replace("-add","");var d=a(":text."+c).val();if(!b.validate(d)){return false}a("#errors").children().remove();b.addRecord(c,d)});a(":button[name$=delete]").click(function(){a("#errors").children().remove();var c=a(this).attr("name").replace("-delete","");var d=a("select."+c).val();a("#confirm-delete-button").data({type:c,value:d});a.get(b.target,{"side-effects":d,type:c},function(e){a("#modal-body-delete").children().remove().end().append(e)});a("#modal-container-delete div.modal-header").text("Confirm Delete: "+d);a("#modal-container-delete").modal("show")});a("#confirm-delete-button").click(function(){b.deleteRecord(a(this).data("type"),a(this).data("value"));a("#modal-container-delete").modal("hide")});a(":button[name$=edit]").click(function(){var d=a(this).attr("name").replace("-edit","");var c=a("select."+d).val();var e=a(":text."+d).val();if(!b.validate(e)){return false}a("#errors").children().remove();a("#confirm-edit-button").data({type:d,oldValue:c,newValue:e});a.get(b.target,{"side-effects":c,type:d},function(f){a("#modal-body-edit").children().remove().end().append(f)});a("#modal-container-edit div.modal-header").text("Confirm Edit: "+c+" to "+e);a("#modal-container-edit").modal("show")});a("#confirm-edit-button").click(function(){b.editRecord(a(this).data("type"),a(this).data("oldValue"),a(this).data("newValue"));a("#modal-container-edit").modal("hide")});a("#cancel-edit-button").click(function(){a("#modal-container-edit").modal("hide")});a("#cancel-delete-button").click(function(){a("#modal-container-delete").modal("hide")});a("#modal-container-delete").modal({backdrop:true,keyboard:true});a("#modal-container-edit").modal({backdrop:true,keyboard:true})})}(jQuery));